machine:
  services:
    - docker
  environment:
    - PATH: $HOME/google-cloud-sdk/bin:$PATH
    - $GCLOUD: $HOME/google-cloud-sdk/bin

dependencies:
  pre:
    - pwd
    - curl  -O https://dl.google.com/dl/cloudsdk/release/google-cloud-sdk.zip
    - unzip google-cloud-sdk.zip
    - ./google-cloud-sdk/install.sh --usage-reporting=true --path-update=true --bash-completion=true --rc-path=.bashrc --disable-installation-options
    - $GCLOUD/gcloud
    - gcloud
  override:
    - docker build -t cullophid/circleci .

test:
  override:
    - docker run cullophid/circleTest;
